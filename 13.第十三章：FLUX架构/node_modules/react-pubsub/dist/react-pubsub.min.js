!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.reactPubsub=t(require("react")):e.reactPubsub=t(e.React)}(this,function(e){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(4);Object.defineProperty(t,"createPubSub",{enumerable:!0,get:function(){return n(o).default}});var u=r(7);Object.defineProperty(t,"PubSubProvider",{enumerable:!0,get:function(){return n(u).default}});var i=r(8);Object.defineProperty(t,"createPubSubConnector",{enumerable:!0,get:function(){return n(i).default}})},function(t,r){t.exports=e},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=n.PropTypes.shape,u=n.PropTypes.func,i=o({register:u.isRequired,unregister:u.isRequired});t.default=i},function(e,t){"use strict";var r=function(){function e(e,t){var r=[],n=!0,o=!1,u=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(a){o=!0,u=a}finally{try{!n&&s.return&&s.return()}finally{if(o)throw u}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e={},t=e.hasOwnProperty;return{subscribe:function(r,n){if(!r||"string"!=typeof r)throw new Error("Default adapter '.subscribe()' expected an action (string) as first argument instead received: "+r);if(!n||"function"!=typeof n)throw new Error("Default adapter '.subscribe()' expected a function as second argument instead received: "+n);return t.call(e,r)||(e[r]=[]),e[r].push(n),[r,n]},unsubscribe:function(t){if(!t||!Array.isArray(t))throw new Error("Default adapter '.unsubscribe()' expected a token (array) instead received: "+t);if(2!==t.length||"string"!=typeof t[0]||"function"!=typeof t[1])throw new Error("Default adapter '.unsubscribe()' expected a valid token ([string, function]) instead received: "+t);var n=r(t,2),o=n[0],u=n[1],i=e[o]||[],s=i.indexOf(u);0>s?console.error("You're unsubscribing an unrecognized token "+t):i.splice(s,1)},publish:function(r){for(var n=arguments.length,o=Array(n>1?n-1:0),u=1;n>u;u++)o[u-1]=arguments[u];if(!r||"string"!=typeof r)throw new Error("Default adapter '.publish()' expected an action (string) as first argument instead received: "+r);return t.call(e,r)?void e[r].forEach(function(e){return e.apply(void 0,o)}):void console.info("The action '"+r+"' being published has no listeners")}}};t.default=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),u=n(o),i=r(6),s=n(i),a=r(5),c=n(a),f=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments.length<=1||void 0===arguments[1]?(0,u.default)():arguments[1],r=(0,c.default)(t),n={register:function(t){if(!t)throw new Error("'createPubSub.register()' expected a component instead received: "+t);if(!e[t]){var o=function(){return n.unregister(t)};e[t]=(0,s.default)(r,o)}return e[t]},unregister:function(t){if(!t)throw new Error("'createPubSub.unregister()' expected a component instead received: "+t);e[t]?(e[t].removeAll(),delete e[t]):console.error(t.displayName+" is NOT registerd to PubSub")}};return n};t.default=f},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){var t=e.publish,r=e.subscribe,n=e.unsubscribe;return{publish:t,subscribe:r,unsubscribe:n}};t.default=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(!e)throw new Error("'createSubscription()' expected an adapter as first argument instead received: "+e);if(!t)throw new Error("'createSubscription()' expected a function as second argument instead received: "+t);var r={unsubscribe:t,subscriptions:[],add:function(t,n){if(!t||"string"!=typeof t)throw new Error("Subscription '.add()' expected an action (string) as first argument instead received: "+t);if(!n||"function"!=typeof n)throw new Error("Subscription '.add()' expected a function as second argument instead received: "+n);var o=e.subscribe(t,n);return r.subscriptions.push(o),function(){var t=r.subscriptions.indexOf(o);if(0>t)throw new Error("PubSub Error: you're trying to unsubscribe an unrecognized token");r.subscriptions.splice(t,1),e.unsubscribe(o)}},removeAll:function(){r.subscriptions.forEach(function(t){return e.unsubscribe(t)}),r.subscriptions=[]},publish:function(t){if(!t||"string"!=typeof t)throw new Error("Subscription '.publish()' expected an action (string) as first argument instead received: "+t);for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;r>o;o++)n[o-1]=arguments[o];e.publish.apply(e,[t].concat(n))}};return r};t.default=r},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),c=r(2),f=n(c),p=!1,b=function(){p||(p=!0,console.error("<PubSubProvider> currently can't dynamically change the pubSubCore!"))},l=function(e){function t(e,r){o(this,t);var n=u(this,Object.getPrototypeOf(t).call(this,e,r));return n.pubSubCore=e.pubSubCore,n}return i(t,e),s(t,[{key:"getChildContext",value:function(){return{pubSubCore:this.pubSubCore}}},{key:"componentWillReceiveProps",value:function(e){var t=this.pubSubCore,r=e.pubSubCore;t!==r&&b()}},{key:"render",value:function(){var e=this.props.children;return a.Children.only(e)}}]),t}(a.Component);t.default=l,l.propTypes={pubSubCore:f.default.isRequired,children:a.PropTypes.element.isRequired},l.childContextTypes={pubSubCore:f.default.isRequired}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return e.displayName||e.name||"Component"}function c(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return Object.keys(e).filter(function(t){return void 0===e[t]||null===e[t]}).forEach(function(t){return delete e[t]}),e}function f(e){var t=Object.keys(e).every(function(t){return"function"==typeof e[t]||"string"==typeof e[t]});if(!t)throw new Error('Every mapped Subscription of "createPubSubConnector" must be a functionreturning the value to be passed as prop to the decorated component.');return function(t,r,n){var o=t.add,u={},i=function(e){var t={},r=Object.keys(e).filter(function(r){return u.hasOwnProperty(r)&&e[r]&&(0,w.default)(u[r],e[r])?!1:(t[r]=e[r],!0)});return r.length?(u=c(d({},u,t)),!0):!1},a=function(e,t){return u.hasOwnProperty(e)&&t&&(0,w.default)(u[e],t)?!1:(u=c(d({},u,s({},e,t))),!0)};return Object.keys(e).forEach(function(t){var u=e[t];"function"==typeof u?o(t,function(){for(var e=arguments.length,t=Array(e),o=0;e>o;o++)t[o]=arguments[o];var s=u.apply(void 0,t.concat([n()]));i(s)&&r()}):o(t,function(e){a(u,e)&&r()})}),function(){return u}}}function p(e){return function(t){return Object.keys(e).filter(function(t){return"function"==typeof e[t]}).reduce(function(r,n){return r[n]=function(){for(var r=arguments.length,o=Array(r),u=0;r>u;u++)o[u]=arguments[u];return e[n].apply(e,[t].concat(o))},r},{})}}function b(e,t){function r(t,r,n){var o=void 0;o=(0,m.default)(e)?f(e):e||x,y=o(t,r,n),g=y.length>0}function n(e){var t=g?y(e):y();if(!(0,m.default)(t))throw new Error("'mapSubscriptionsToProps' must return an object.Instead received "+t);return t}function s(e,t){var r=e.publish,n=S?P(r,t):P(r);if(!(0,m.default)(n))throw new Error("'mapPublishToProps' must return an object.Instead received "+n);return n}var c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(e&&"function"!=typeof e&&!(0,m.default)(e))throw new Error('"createPubSubConnector" expected "mapSubscriptionsToProps" to be a function'+(" or a plain object, instead received: "+e+"."));var b=(0,m.default)(e)?Object.keys(e).length:Boolean(e),y=C,g=!1,P=(0,m.default)(t)?p(t):t||j,S=P.length>1,E=c||{},_=E.withRef,k=void 0===_?!1:_;return function(e){var t=function(t){function a(e,t){o(this,a);var r=u(this,Object.getPrototypeOf(a).call(this,e,t));if(r.pubSubCore=e.pubSubCore||t.pubSubCore,!r.pubSubCore)throw new Error('Could not find "pubSubCore" in either the context or '+('props of "'+r.constructor.displayName+'". ')+"Either wrap the root component in a <PubSubProvider>, "+('or explicitly pass "pubSubCore" as a prop to "'+r.constructor.displayName+'".'));return r.state={},r.pubSub=r.pubSubCore.register(r),r}return i(a,t),l(a,[{key:"componentWillMount",value:function(){this.trySubscribe()}},{key:"componentWillReceiveProps",value:function(e){(0,w.default)(e,this.props)||(this.haveOwnPropsChanged=!0)}},{key:"shouldComponentUpdate",value:function(){return this.haveOwnPropsChanged||this.hasSubscribedPropsChanged}},{key:"componentWillUnmount",value:function(){this.pubSub.unsubscribe()}},{key:"getWrappedInstance",value:function(){if(!k)throw new Error("To access the wrapped instance, you need to specify explicitly { withRef: true } in the options passed to the createPubSubConnector() call.");return this.refs.wrappedInstance}},{key:"hasSubscriptions",value:function(){return this.pubSub&&this.pubSub.subscriptions.length?!0:!1}},{key:"notifyChange",value:function(){var e=this.state.subscribedProps,t=y(this.props);e!==t&&(this.hasSubscribedPropsChanged=!0,this.setState({subscribedProps:t}))}},{key:"trySubscribe",value:function(){var e=this;b&&(r(this.pubSub,function(){return e.notifyChange()},function(){return e.props}),this.notifyChange())}},{key:"updateSubscribedPropsIfNeeded",value:function(){var e=n(this.props);return this.subscribedProps&&(0,w.default)(e,this.subscribedProps)?!1:(this.subscribedProps=e,!0)}},{key:"updatePublishPropsIfNeeded",value:function(){var e=s(this.pubSub,this.props);return this.publishProps&&(0,w.default)(e,this.publishProps)?!1:(this.publishProps=e,!0)}},{key:"render",value:function(){var t=this.haveOwnPropsChanged,r=this.hasSubscribedPropsChanged,n=this.renderedElement,o=this.pubSub;this.haveOwnPropsChanged=!1,this.hasSubscribedPropsChanged=!1;var u=!0,i=!0;n&&(u=r||t&&g,i=t&&S);var s=!1,a=!1;if(u&&(s=this.updateSubscribedPropsIfNeeded()),i&&(a=this.updatePublishPropsIfNeeded()),!s&&!a&&!t&&n)return n;var c={pubSub:o};k&&d(c,{ref:"wrappedInstance"});var f=d({},this.props,this.subscribedProps,this.publishProps,c);return this.renderedElement=(0,h.createElement)(e,f),this.renderedElement}}]),a}(h.Component);return t.contextTypes={pubSubCore:O.default},t.propTypes={pubSubCore:O.default},t.displayName="PubSubConnector("+a(e)+")",t.WrappedComponent=e,(0,v.default)(t,e)}}var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=b;var h=r(1),y=r(11),v=n(y),g=r(9),m=n(g),P=r(10),w=n(P),S=r(2),O=n(S),j=function(e){return{publish:e}},C=function(){return{}},x=function(){return C}},function(e,t){"use strict";function r(e){if(!e||"object"!==("undefined"==typeof e?"undefined":n(e)))return!1;var t="function"==typeof e.constructor?Object.getPrototypeOf(e):Object.prototype,r=t.constructor;return"function"==typeof r&&r instanceof r&&o(r)===o(Object)}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=function(e){return Function.prototype.toString.call(e)}},function(e,t){"use strict";function r(e,t){if(e===t)return!0;var r=Object.keys(e),n=Object.keys(t);return r.length!==n.length?!1:r.every(function(r){return t.hasOwnProperty(r)&&e[r]===t[r]})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0};e.exports=function(e,t){for(var o=Object.getOwnPropertyNames(t),u=0;u<o.length;++u)r[o[u]]||n[o[u]]||(e[o[u]]=t[o[u]]);return e}}])});